-- Drop conflicting RLS policies safely (no-ops if missing)\ndo $$\ndeclare r record;\nbegin\n  for r in\n    select polname, schemaname, tablename\n    from pg_policies\n    where schemaname = 'public'\n      and tablename in ('profiles','nests','nest_members','threads','posts','reactions','flags')\n  loop\n    execute format('drop policy if exists %I on %I.%I', r.polname, r.schemaname, r.tablename);\n  end loop;\nend $$;\n\n-- Drop known triggers if they exist\ndrop trigger if exists set_threads_updated on threads;\ndrop trigger if exists set_posts_updated on posts;\ndrop trigger if exists on_auth_user_created on auth.users;